System.register("chunks:///_virtual/BattleRoyale_FlyGoldEff.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,l,e,i,n,r,a,s,d,c,u,f,P,y,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,l=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){n=o.cclegacy,r=o._decorator,a=o.Node,s=o.NodePool,d=o.instantiate,c=o.Component,u=o.Vec3,f=o.randomRange,P=o.tween,y=o.v3,p=o.bezier}],execute:function(){var v,g,h,b,w,G,N,_,m,z,x,E,R;n._RF.push({},"14c58AWNW1GlJ2ddPnrK/e4","BattleRoyale_FlyGoldEff",void 0);var F=r.ccclass,B=r.property;o("BattleRoyale_FlyGoldEff",(v=F("BattleRoyale_FlyGoldEff"),g=B(a),h=B(a),b=B(a),w=B(a),G=B(a),v((m=t((_=function(o){function t(){for(var t,l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n))||this,e(t,"goldPrefab",m,i(t)),e(t,"startPos",z,i(t)),e(t,"controlPos1",x,i(t)),e(t,"controlPos2",E,i(t)),e(t,"goldEndPos",R,i(t)),t.goldPool=void 0,t.sliverPool=void 0,t}l(t,o);var n=t.prototype;return n.onLoad=function(){this.goldPool=new s("flyGoldPool"),this.sliverPool=new s("flySliverPool"),this.goldPrefab.active=!1},n.putGoldNode=function(o){this.goldPool.put(o)},n.putSliverNode=function(o){this.sliverPool.put(o)},n.getGoldNode=function(){var o=this.goldPool.get();return o||((o=d(this.goldPrefab)).active=!0),o},n.onDestroy=function(){this.goldPool.clear()},n.flyGold=function(o){this._flyGold(o,this.startPos.worldPosition,this.controlPos1.worldPosition,this.controlPos2.worldPosition,this.goldEndPos.worldPosition)},n.flyGoldTo=function(o,t,l,e,i){for(var n=this,r=function(){var r=n.getGoldNode();r.setParent(n.node),r.worldPosition=l;var s=a,d=new u(l.x+f(-i,i),l.y+f(-i,i)),c=new u(e.x+f(-i/2,i/2),e.y+f(-i/2,i/2));P(r).delay(.1*s).call((function(){r.active=!0})).to(f(.2,.4),{worldPosition:d}).delay(.5).to(f(o,t),{worldPosition:c}).delay(.2).call((function(){n.putGoldNode(r)})).start()},a=0;a<10;a++)r()},n._flyGold=function(o,t,l,e,i){for(var n=this,r=function(){var r=n.getGoldNode();r.setParent(n.node),r.worldPosition=t;var s=a;P({value:t}).delay(.1*s).call((function(){r.active=!0})).to(o,{value:i},{onUpdate:function(o,n){var a=y(p(t.x,l.x,e.x,i.x,n),p(t.y,l.y,e.y,i.y,n),0);null!=r.parent&&(r.worldPosition=a)}}).call((function(){n.putGoldNode(r)})).start()},a=0;a<10;a++)r()},t}(c)).prototype,"goldPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(_.prototype,"startPos",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(_.prototype,"controlPos1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(_.prototype,"controlPos2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(_.prototype,"goldEndPos",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=_))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRoyale_MsgPoster.ts",["cc","./G.ts","./CmdEvent.ts"],(function(e){var o,t,n,r;return{setters:[function(e){o=e.cclegacy,t=e._decorator},function(e){n=e.G},function(e){r=e.CmdEvent}],execute:function(){var s;o._RF.push({},"f8bf9PMZeVKKoXSQU0bjBD/","BattleRoyale_MsgPoster",void 0);var a=t.ccclass;t.property,e("BattleRoyale_MsgPoster",a("BattleRoyale_MsgPoster")(s=function(){function e(){}return e.postCmd=function(e,o,t,r){void 0===r&&(r=null),n.Server.request(e,o,(function(e,o){if(r){var t=null;0==o&&(t=n.GameProtoBuf.ResultResp.decode(e)),r(o,t)}}))},e.reqAllRoomList=function(){var e=new n.GameProtoBuf.AllRoomReq;this.postCmd(r.AllRoomList,e,n.GameProtoBuf.AllRoomResp)},e.selectRoom=function(e){var o=new n.GameProtoBuf.SelectRoomReq;o.roomId=e,this.postCmd(r.SelectRoom,o,n.GameProtoBuf.SelectRoomResp)},e.pick=function(e,o){var t=new n.GameProtoBuf.PickReq;t.spaceId=e,t.sceneId=o,this.postCmd(r.RoomPick,t,n.GameProtoBuf.PickResp)},e.sceneReq=function(){var e=new n.GameProtoBuf.SceneReq;this.postCmd(r.RoomScene,e,n.GameProtoBuf.SceneResp)},e.betReq=function(e,o){var t=new n.GameProtoBuf.BetReq;t.money=e,t.sceneId=o,this.postCmd(r.RoomBet,t,n.GameProtoBuf.BetResp)},e.leaveGame=function(){var e=new n.GameProtoBuf.LeaveReq;this.postCmd(r.RoomLeave,e,n.GameProtoBuf.LeaveResp)},e.roomResult=function(e,o){var t=new n.GameProtoBuf.ResultReq;t.sceneId=e,this.postCmd(r.RoomResult,t,n.GameProtoBuf.ResultResp,o)},e.gameRank=function(e){var o=new n.GameProtoBuf.RankReq;o.week=e,this.postCmd(r.RoomRank,o,n.GameProtoBuf.RankResp)},e.gameRecord=function(){var e=new n.GameProtoBuf.RecordReq;this.postCmd(r.RoomRecord,e,n.GameProtoBuf.RecordResp)},e.gameGetMoneyReq=function(){var e=new n.GameProtoBuf.GetMoneyReq;this.postCmd(r.OnGetMoney,e,n.GameProtoBuf.GetMoneyResp)},e.gameMoneyTransferReq=function(e){var o=new n.GameProtoBuf.MoneyTransferReq;o.money=e,this.postCmd(r.OnMoneyTransfer,o,n.GameProtoBuf.MoneyTransferResp)},e.gameNowTimeReq=function(){var e=new n.GameProtoBuf.NowTimeReq;this.postCmd(r.OnGetNowTime,e,n.GameProtoBuf.NowTimeResp)},e}())||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRoyale_Title.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleRoyaleData.ts","./Utils.ts","./AudioManager.ts","./I18NFunc.ts"],(function(t){var e,i,l,n,a,r,o,u,s,c,p,b,h,f,_,T,m,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,l=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,o=t.UIOpacity,u=t.Node,s=t.Label,c=t.UITransform,p=t.Tween,b=t.tween,h=t.v3,f=t.Component},function(t){_=t.BattleRoyaleData},function(t){T=t.Utils},function(t){m=t.AudioManager},function(t){y=t.I18NFunc}],execute:function(){var g,L,d,w,S,v,A,z,F,I,M,B,C,N,R,K,k,D,G,P,U,O,W,Z,j,x,H,q,E,J,Q,V,X,Y,$,tt,et,it,lt,nt,at,rt,ot;a._RF.push({},"7bd5bK13oRPrZmbis8AZmTa","BattleRoyale_Title",void 0);var ut=r.ccclass,st=r.property;t("BattleRoyale_Title",(g=ut("BattleRoyale_Title"),L=st(o),d=st(u),w=st(u),S=st(s),v=st(u),A=st(u),z=st(u),F=st(u),I=st(s),M=st(s),B=st(u),C=st(s),N=st(u),R=st(u),K=st(s),k=st(s),D=st(u),G=st(c),P=st(s),U=st(s),g((Z=e((W=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).isAppear=void 0,e.runSpeed=void 0,l(e,"Title",Z,n(e)),l(e,"Notice",j,n(e)),l(e,"Title_Appear",x,n(e)),l(e,"Label_Appear",H,n(e)),l(e,"Title_GameStart",q,n(e)),l(e,"Title_Kill",E,n(e)),l(e,"Title_Win",J,n(e)),l(e,"Node_Light",Q,n(e)),l(e,"Label_AllBet",V,n(e)),l(e,"Label_AllGet",X,n(e)),l(e,"Title_Lose",Y,n(e)),l(e,"Label_AllLose",$,n(e)),l(e,"Title_NoBet",tt,n(e)),l(e,"Title_Invaild",et,n(e)),l(e,"Label_KillSpace",it,n(e)),l(e,"Label_KillScore",lt,n(e)),l(e,"Title_Maintain",nt,n(e)),l(e,"Mask",at,n(e)),l(e,"Label_Cotent",rt,n(e)),l(e,"Label_return",ot,n(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.Notice.active=!1,this.isAppear=!1,this.runSpeed=100,this.Title_Maintain.active=!1},a.ShowTitle=function(t){this.Title&&(p.stopAllByTarget(this.Node_Light),this.Notice.active=!0,this.Title.opacity=255,this.Title_Appear.active=1==t,this.Title_GameStart.active=2==t,this.Title_Kill.active=3==t,this.Title_Win.active=4==t,this.Title_Lose.active=5==t,this.Title_NoBet.active=6==t,this.Title_Invaild.active=7==t)},a.FadeIn=function(){p.stopAllByTarget(this.Title),this.Title.opacity=0,b(this.Title).to(.3,{opacity:255}).union().start()},a.FadeOut=function(){var t=this;p.stopAllByTarget(this.Title),this.Title.opacity=255,b(this.Title).to(.3,{opacity:0}).call((function(){t.Notice.active=!1})).union().start()},a.RefreshCountDown=function(t){var e=this;this.Label_Appear&&(this.Label_Appear.string=t.toString(),t>1&&0==this.isAppear&&(this.isAppear=!0,this.ShowTitle(1),this.FadeIn()),1==t&&1==this.isAppear&&(this.isAppear=!1,setTimeout((function(){e.Label_Appear.string="0",e.ShowPolice()}),1e3)))},a.ShowPolice=function(){var t=this;this.ShowTitle(3),setTimeout((function(){t.FadeOut()}),1e3)},a.ShowResult=function(t,e,i,l){var n=_.Instance().UserSelf.spaceId;if(_.Instance().getGameState())if(0!=n&&i>0){n!=t.killSpaceId?(m.Instance.PlaySound("victory"),this.Label_AllBet.string=T.FormatMoneyForCamma(i),this.Label_AllGet.string=T.FormatMoneyForCamma(e),this.ShowTitle(4)):(this.Label_AllLose.string=T.FormatMoneyForCamma(i),this.ShowTitle(5)),setTimeout((function(){l&&l()}),3e3)}else{this.Label_KillScore.string=T.FormatMoneyForCamma(t.sceneData.betScatter.get(t.killSpaceId)),this.Label_KillSpace.string=T.formatString(y.t("game.main_tips_result"),["01","02","03","04","05","06","07","08"][t.killSpaceId-1]),this.ShowTitle(6),setTimeout((function(){l&&l()}),3e3)}else this.ShowTitle(7),this.Label_return.string=T.FormatMoneyForCamma(i),setTimeout((function(){l&&l()}),3e3)},a.ShowGameStart=function(){var t=this;this.ShowTitle(2),this.FadeIn(),setTimeout((function(){t.FadeOut()}),2500)},a.ShowMaintain=function(){var t=this;if(this.Label_Cotent){this.Title_Maintain.active=!0;var e=this.Label_Cotent.getComponent(c).width,i=(e+this.Mask.width)/this.runSpeed;p.stopAllByTarget(this.Label_Cotent.node),this.Label_Cotent.node.setPosition(this.Mask.width,0,0),b(this.Label_Cotent.node).delay(.5).to(i,{position:h(-e,0,0)}).call((function(){t.Label_Cotent.node.setPosition(t.Mask.width,0,0)})).union().repeatForever().start()}},a.onDestroy=function(){},e}(f)).prototype,"Title",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(W.prototype,"Notice",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(W.prototype,"Title_Appear",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(W.prototype,"Label_Appear",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(W.prototype,"Title_GameStart",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(W.prototype,"Title_Kill",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(W.prototype,"Title_Win",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"Node_Light",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(W.prototype,"Label_AllBet",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(W.prototype,"Label_AllGet",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(W.prototype,"Title_Lose",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(W.prototype,"Label_AllLose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(W.prototype,"Title_NoBet",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(W.prototype,"Title_Invaild",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(W.prototype,"Label_KillSpace",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(W.prototype,"Label_KillScore",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(W.prototype,"Title_Maintain",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(W.prototype,"Mask",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(W.prototype,"Label_Cotent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(W.prototype,"Label_return",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=W))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRoyaleData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){var r,s;n._RF.push({},"b62caBCIEdKDqvIIoFf3I7z","BattleRoyaleData",void 0);var i=a.ccclass;a.property,t("BattleRoyaleData",i("BattleRoyaleData")(((s=function(){function t(){this.m_UserSelf=void 0,this.maxPlayerNum=2,this.betPlayer=0}t.Instance=function(){return null==this.instance&&(this.instance=new t),this.instance};var n=t.prototype;return n.Init=function(){this.UserSelf=null},n.getGameState=function(){return this.betPlayer>=this.maxPlayerNum},e(t,[{key:"UserSelf",get:function(){return this.m_UserSelf},set:function(t){this.m_UserSelf=t}}]),t}()).instance=void 0,r=s))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRoyaleMainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pbkiller.ts","./G.ts","./Utils.ts","./CmdEvent.ts","./Server.ts","./BattleRoyale_MsgPoster.ts","./BattleRoyaleData.ts","./PopBoard.ts","./BattleRoyale_FlyGoldEff.ts","./BattleRoyale_Title.ts","./TipWnd.ts","./PopHelp.ts","./PopTipsPanel.ts","./PopLoading.ts","./PopRank.ts","./AudioManager.ts","./I18NFunc.ts"],(function(e){var t,n,i,a,o,r,l,s,c,p,u,d,h,f,S,m,v,y,P,g,_,b,B,w,k,I,T,R,C,M,G,A,E,O,L,U,N,D,W,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.AudioSource,s=e.Node,c=e.sp,p=e.Label,u=e.Button,d=e.profiler,h=e.NodePool,f=e.find,S=e.Tween,m=e.UIOpacity,v=e.tween,y=e.v3,P=e.Vec3,g=e.UITransform,_=e.randomRange,b=e.instantiate,B=e.Component},function(e){w=e.pbkiller},function(e){k=e.G},function(e){I=e.Utils},function(e){T=e.CmdEvent},function(e){R=e.Server},function(e){C=e.BattleRoyale_MsgPoster},function(e){M=e.BattleRoyaleData},function(e){G=e.PopBoard},function(e){A=e.BattleRoyale_FlyGoldEff},function(e){E=e.BattleRoyale_Title},function(e){O=e.TipWnd},function(e){L=e.PopHelp},function(e){U=e.PopTipsPanel},function(e){N=e.PopLoading},function(e){D=e.PopRank},function(e){W=e.AudioManager},function(e){z=e.I18NFunc}],execute:function(){var x,F,K,H,q,V,j,X,Y,J,Q,Z,$,ee,te,ne,ie,ae,oe,re,le,se,ce,pe,ue,de,he,fe,Se,me,ve,ye,Pe,ge,_e,be,Be,we,ke,Ie,Te,Re,Ce,Me,Ge,Ae,Ee,Oe,Le,Ue,Ne,De,We,ze,xe,Fe,Ke,He,qe,Ve,je,Xe,Ye,Je,Qe,Ze,$e,et,tt,nt,it,at,ot,rt,lt,st,ct,pt,ut,dt,ht;o._RF.push({},"9c7eeO+pNdGK4HlowkmKXKa","BattleRoyaleMainUI",void 0);var ft=r.ccclass,St=r.property,mt=function(e){return e[e.Start=0]="Start",e[e.Betting=1]="Betting",e[e.Ending=2]="Ending",e[e.Killing=3]="Killing",e}(mt||{}),vt=function(e){return e[e.Self=0]="Self",e[e.Others=1]="Others",e[e.Police=2]="Police",e}(vt||{});e("BattleRoyaleMainUI",(x=ft("BattleRoyaleMainUI"),F=St(l),K=St(G),H=St(D),q=St(L),V=St(A),j=St(E),X=St(O),Y=St(U),J=St(N),Q=St(s),Z=St(s),$=St(c.Skeleton),ee=St(s),te=St(s),ne=St(s),ie=St(s),ae=St(s),oe=St(s),re=St(s),le=St(s),se=St(s),ce=St(s),pe=St(s),ue=St(p),de=St(p),he=St(p),fe=St(s),Se=St(p),me=St(u),ve=St(u),ye=St(p),Pe=St(u),ge=St(u),_e=St(u),be=St(p),Be=St(s),we=St(u),ke=St(s),Ie=St(u),x((Ce=t((Re=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).gameState=void 0,t.IsReconnect=void 0,t.roomId=void 0,t.roomInfo=void 0,t.curSceneId=void 0,t.curSceneEndTime=void 0,t.betScatter=void 0,t.myTotalBet=void 0,t.winMoney=void 0,t.maintainSceneId=void 0,t.maintainRoomId=void 0,t.m_SceneResultData=void 0,t.walkSpeed=void 0,t.curSelectSpaceIdx=void 0,t.isMyWalking=void 0,t.willBet=void 0,t.curBetIdx=void 0,t.allBetGroup=void 0,t.preferPickspaceIdx=void 0,t.playerLimit=void 0,t.isFirstEnter=void 0,t.SpineStrs=void 0,t.BoomSpineStrs=void 0,t.SpaceGroup=void 0,t.IconGroup=void 0,t.spaceStandGroup=void 0,t.LinesGroup=void 0,t.playerAvatarMap=void 0,t.playerPlaceMap=void 0,t.avatarPool=void 0,i(t,"audioSource",Ce,a(t)),i(t,"m_PopBoard",Me,a(t)),i(t,"m_PopRank",Ge,a(t)),i(t,"m_PopHelp",Ae,a(t)),i(t,"m_FlyGoldEff",Ee,a(t)),i(t,"m_BattleRoyale_Title",Oe,a(t)),i(t,"m_TipWnd",Le,a(t)),i(t,"m_PopTipsPanel",Ue,a(t)),i(t,"m_PopLoading",Ne,a(t)),i(t,"m_EventTarget",De,a(t)),i(t,"SpacePanel",We,a(t)),i(t,"Spine_Red",ze,a(t)),i(t,"PlayerTemp",xe,a(t)),i(t,"WaitStandPanel",Fe,a(t)),i(t,"PlayerPanel",Ke,a(t)),i(t,"IconPanel",He,a(t)),i(t,"SelfPlayer",qe,a(t)),i(t,"Lines",Ve,a(t)),i(t,"PosEnter",je,a(t)),i(t,"KillStart",Xe,a(t)),i(t,"KillPlayer",Ye,a(t)),i(t,"Boom",Je,a(t)),i(t,"Node_Scene",Qe,a(t)),i(t,"Label_SceneID",Ze,a(t)),i(t,"Label_CurCount",$e,a(t)),i(t,"Label_LimitCount",et,a(t)),i(t,"Node_CountDown",tt,a(t)),i(t,"Label_CountDown",nt,a(t)),i(t,"Button_Week",it,a(t)),i(t,"Button_Total",at,a(t)),i(t,"Label_MyGold",ot,a(t)),i(t,"Button_OpenTransfer",rt,a(t)),i(t,"Button_Bet",lt,a(t)),i(t,"Button_OpenBetList",st,a(t)),i(t,"Label_CurBet",ct,a(t)),i(t,"Node_SelectBet",pt,a(t)),i(t,"Button_CloseBet",ut,a(t)),i(t,"BetContent",dt,a(t)),i(t,"Button_Help",ht,a(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){1==globalThis.CC_DEBUG?d.hideStats():(d.hideStats(),console.log=function(){}),W.Instance.init(this.audioSource),this.InitComponent(),this.InitData(),this.AddEvent()},o.update=function(e){if(this.Label_CountDown){var t=this.curSceneEndTime-I.GetServeTime();t=t<0?0:t,this.Label_CountDown.string=t.toString(),0<t&&t<11&&(W.Instance.PlaySound("countdown10"),this.m_BattleRoyale_Title.RefreshCountDown(t),this.Node_Scene.active=!1)}},o.InitData=function(){k.Init(),k.Server=new R,k.EventTarget=this.m_EventTarget,M.Instance().Init(),this.SpineStrs=["bomb_explosion","myself_idle","myself_walk","others_idle","others_walk","police_bomb","police_idle","police_walk"],this.BoomSpineStrs=["lb_attack","rb_attack","rb_attack","rf_attack","rb_attack","rf_attack","rf_attack","lb_attack"],this.isFirstEnter=!0,this.gameState=mt.Start,this.playerAvatarMap=new Map,this.playerPlaceMap=new Map,this.avatarPool=new h("people_avatar"),this.isMyWalking=!1,this.winMoney=0,this.myTotalBet=0,this.curBetIdx=0,this.playerLimit=2,this.roomId=-1,this.Label_LimitCount.string="/ "+this.playerLimit,this.Click_CloseBet(),this.resetData()},o.resetData=function(){this.curSceneId=-1,this.betScatter=null,this.walkSpeed=350,this.preferPickspaceIdx=-1,this.willBet=0,this.curSceneEndTime=0,this.Node_Scene.active=!1,this.Node_CountDown.active=!1,this.Spine_Red.node.active=!1,this.HideAllDoor()},o.InitComponent=function(){var e=this;this.PlayerTemp.active=!1,this.m_PopHelp.node.active=!1,this.Boom.active=!1,this.m_PopTipsPanel.node.active=!1,this.m_PopLoading.node.active=!1,this.m_PopBoard.node.active=!1,this.m_PopRank.node.active=!1,this.m_PopTipsPanel.SetMainUI(this),this.SpaceGroup=[],this.spaceStandGroup=[];for(var t=1;t<=8;t++){var n=f("Space"+t,this.SpacePanel);n&&(this.SpaceGroup.push(n),this.spaceStandGroup.push(f("Node_Stand",n)))}this.IconGroup=[];for(var i=1;i<=8;i++){var a=f("Coins"+i,this.IconPanel);a&&this.IconGroup.push(a)}this.LinesGroup=[];for(var o=1;o<=8;o++){var r=f("Line"+o,this.Lines);r&&this.LinesGroup.push(r)}for(var l=function(){for(var t=1,n=s;!I.IsEmpty(f("Button_Click"+t,e.SpaceGroup[s]));)f("Button_Click"+t,e.SpaceGroup[s]).on(u.EventType.CLICK,(function(){e.Click_Space(n)}),e),t++},s=0;s<this.SpaceGroup.length;s++)l();this.Button_Bet.node.on(u.EventType.CLICK,this.Click_Bet,this),this.Button_OpenBetList.node.on(u.EventType.CLICK,this.Click_OpenBetList,this),this.Button_CloseBet.node.on(u.EventType.CLICK,this.Click_CloseBet,this),this.Button_Help.node.on(u.EventType.CLICK,this.Click_Help,this),this.Button_Week.node.on(u.EventType.CLICK,this.Click_Week,this),this.Button_Total.node.on(u.EventType.CLICK,this.Click_Total,this)},o.start=function(){var e=this;this.PreloadProto((function(){e.ConnectUrl(),W.Instance.playMusic("bgm")}))},o.ConnectUrl=function(){var e=this,t={phone:"123456"},n=window.location.href.split("?token=");if(n&&2==n.length){var i=n[1];t.phone=i,k.Http.POST("/v1/ulogin",t,(function(t,n){if(t){var i=n.data.token;e.WebSocketConnent(i)}}))}},o.AddEvent=function(){this.m_PopLoading.ShowLoading(),k.EventTarget.on(T.AllRoomList,this.OnAllRoomList,this),k.EventTarget.on(T.SelectRoom,this.OnSelectedRoom,this),k.EventTarget.on(T.RoomLeave,this.OnLeaveGame,this),k.EventTarget.on(T.RoomBet,this.OnBet,this),k.EventTarget.on(T.RoomPick,this.OnPick,this),k.EventTarget.on(T.RoomScene,this.OnGameScene,this),k.EventTarget.on(T.OnBetScatterUpdate,this.OnBetScatterUpdate,this),k.EventTarget.on(T.OnPlayerUpdate,this.OnPlayerUpdate,this),k.EventTarget.on(T.OnSceneResult,this.OnSceneResult,this),k.EventTarget.on(T.OnMoneyTransfer,this.OnMoneyTransfer,this),k.EventTarget.on(T.OnGetNowTime,this.OnGetNowTime,this),k.EventTarget.on(T.WSOnKick,this.TokenInvalid,this),k.EventTarget.on(T.WSHeartbeatTimeout,this.OnHeartbeatTimeout,this),k.EventTarget.on(T.OnServerMaintain,this.OnServerMaintain,this),this.node.on(s.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},o.onMouseWheel=function(e){},o.TokenInvalid=function(){this.m_PopTipsPanel.ShowTipsPanel(z.t("game.main_error_1"))},o.OnHeartbeatTimeout=function(){this.m_PopLoading.ShowLoading(),this.m_TipWnd.ShowTips(z.t("game.main_error_2"))},o.PreloadProto=function(e){w.preload((function(){k.PomeloProtoBuf=w.loadFromFile("pomelo.proto","pomelo.common"),k.GateProtoBuf=w.loadFromFile("gate.proto","gate"),k.GameProtoBuf=w.loadFromFile("local.proto","operator.mengtan.games.battleRoyale.v1"),e&&e()}))},o.Click_Space=function(e){this.gameState==mt.Betting?(W.Instance.PlaySound("select"),this.preferPickspaceIdx=e,C.pick(e+1,this.curSceneId)):this.m_TipWnd.ShowTips(z.t("game.main_error_3"))},o.Click_Bet=function(){if(this.curSelectSpaceIdx<0)this.m_TipWnd.ShowTips(z.t("game.main_error_4"));else if(!(this.willBet>0))if(this.gameState==mt.Betting){var e=this.allBetGroup[this.curBetIdx].info;M.Instance().UserSelf.money-e>=0?(W.Instance.PlaySound("upScore"),this.willBet=e,this.UpdateUserMoeny(M.Instance().UserSelf.money-this.willBet),C.betReq(this.willBet,this.curSceneId)):this.m_TipWnd.ShowTips(z.t("game.main_error_5"))}else this.m_TipWnd.ShowTips(z.t("game.main_error_3"))},o.Click_CloseBet=function(){this.Node_SelectBet&&(this.Node_SelectBet.active=!1)},o.Click_OpenTransfer=function(){},o.Click_Help=function(){this.m_PopHelp&&this.m_PopHelp.OpenSelf()},o.Click_OpenBetList=function(){this.Node_SelectBet&&(this.Node_SelectBet.active=!0)},o.Click_Week=function(){this.m_PopRank.GetParam({})},o.Click_Total=function(){this.m_PopBoard.GetParam({})},o.OnAllRoomList=function(e,t){if(0==t){var n=k.GameProtoBuf.AllRoomResp.decode(e).rooms;n.size>0&&(this.roomId=n.keys().next().value,this.roomInfo=n.get(this.roomId),C.selectRoom(this.roomId),this.UpdateBetList(this.roomInfo.bets))}},o.OnSelectedRoom=function(e,t){if(0==t){k.GameProtoBuf.SelectRoomResp.decode(e);this.unschedule(this.ShowEnding),C.sceneReq()}},o.OnLeaveGame=function(e,t){},o.OnBet=function(e,t){if(0==t){var n=k.GameProtoBuf.BetResp.decode(e),i=this.myTotalBet+Number(this.willBet);this.UpdateMyBet(i),this.UpdateUserMoeny(n.money)}else this.UpdateUserMoeny(M.Instance().UserSelf.money-Number(this.willBet));this.willBet=0},o.OnPick=function(e,t){0==t&&this.SelectSpace(this.preferPickspaceIdx+1)},o.OnGameScene=function(e,t){if(0==t){var n=k.GameProtoBuf.SceneResp.decode(e);this.maintainSceneId=n.maintainSceneId,this.maintainRoomId=n.sceneData.roomId,0!=this.maintainSceneId&&this.m_BattleRoyale_Title.ShowMaintain(),this.ClearPeople(),this.gameState=mt.Betting,this.UpdateOwnerData(n.ownerData),this.UpdateSceneData(n.sceneData,n.players),this.UpdatePlayerNum(n.betPlayerNum);var i=this.curSceneEndTime-I.GetServeTime();i=i<0?0:i,this.unschedule(this.ShowEnding),this.scheduleOnce(this.ShowEnding,i),1==this.isFirstEnter?(this.m_PopLoading.HideLoading(),this.isFirstEnter=!1):this.m_BattleRoyale_Title.ShowGameStart()}},o.OnBetScatterUpdate=function(e,t){if(0==t){var n=k.GameProtoBuf.OnBetScatterUpdate.decode(e);this.curSceneId&&n.sceneId.toNumber()==this.curSceneId&&this.UpdateSpacesBet(n.betScatter,!0)}},o.OnPlayerUpdate=function(e,t){if(0==t){var n=k.GameProtoBuf.OnPlayerUpdate.decode(e);this.curSceneId&&n.sceneId.toNumber()==this.curSceneId&&(this.UpdatePlayerNum(n.betPlayerNum),this.UpdateSpacesPlayer(n.players))}},o.OnSceneResult=function(e,t){var n=this;if(0==t){var i=k.GameProtoBuf.OnSceneResult.decode(e);C.roomResult(this.curSceneId,(function(e,t){n.NoticeSceneResult(e,t,i)}))}},o.OnMoneyTransfer=function(e,t){if(0==t){var n=k.GameProtoBuf.MoneyTransferResp.decode(e);this.UpdateUserMoeny(n.money)}},o.OnGetNowTime=function(e,t){if(0==t){var n=k.GameProtoBuf.NowTimeResp.decode(e);k.ServeTimeOffset=n.timestamp-Date.parse((new Date).toString())/1e3,C.reqAllRoomList()}},o.OnServerMaintain=function(e,t){if(0==t){var n=k.GameProtoBuf.OnServerMaintain.decode(e);this.maintainRoomId=n.roomId,this.maintainSceneId=n.sceneId,this.m_BattleRoyale_Title.ShowMaintain()}},o.UpdateBetList=function(e){this.allBetGroup=[];for(var t=0;t<e.length;t++)this.AddBetItem(e[t],t);this.SelectBet(0)},o.AddBetItem=function(e,t){var n=this,i=this.BetContent.children[t];f("Label_Bet",i).getComponent(p).string=I.FormatMoneyForCamma(e),this.BetContent.children[t].on(u.EventType.CLICK,(function(){n.SelectBet(t)}),this),this.allBetGroup.push({item:i,info:e})},o.SelectBet=function(e){if(this.allBetGroup&&this.allBetGroup[e]){for(var t=0;t<this.allBetGroup.length;t++)f("Check",this.allBetGroup[t].item).active=e==t;this.curBetIdx=e,this.Label_CurBet.string=I.FormatMoneyForCamma(this.allBetGroup[e].info),this.Click_CloseBet()}},o.UpdateSceneData=function(e,t){this.curSceneId=e.sceneId.toNumber(),this.curSceneEndTime=e.resultTime.toNumber(),this.Label_SceneID.string="No."+this.curSceneId,this.UpdateSpacesBet(e.betScatter),this.UpdateSpacesPlayer(t),this.ResortPlayersSibling()},o.UpdateOwnerData=function(e,t){void 0===t&&(t=!0),M.Instance().UserSelf=e,this.myTotalBet=Number(e.totalBet),this.SelectSpace(e.spaceId,!1),this.UpdateMyBet(this.myTotalBet),e.skin=0,f("People/Spine_People",this.SelfPlayer).active=0==e.skin,f("People/Spine_Skin1",this.SelfPlayer).active=1==e.skin,f("People/Spine_Skin2",this.SelfPlayer).active=2==e.skin,f("People/Spine_Skin3",this.SelfPlayer).active=3==e.skin,t&&this.UpdateUserMoeny(e.money)},o.UpdateUserMoeny=function(e){M.Instance().UserSelf.money=e,this.Label_MyGold.string=I.FormatMoneyForCamma(e)},o.SelectSpace=function(e,t){var n=this;void 0===t&&(t=!0);for(var i=e-1,a=0;a<this.SpaceGroup.length;a++){var o=f("Sprite_Yellow",this.SpaceGroup[a]),r=a==i;if(o.active=r,r){S.stopAllByTarget(o.getComponent(m)),o.getComponent(m).opacity=0;var l=v(o.getComponent(m));l.to(.5,{opacity:255}).delay(.5).to(.5,{opacity:128}).repeat(1e3,l).start()}}this.Spine_Red&&(e>0&&e<9&&(this.Spine_Red.node.active=!0,this.Spine_Red.setAnimation(0,e.toString(),!0)),this.curSelectSpaceIdx!=i&&(this.SelfPlayer.active=!0,i>=0&&t&&-1==this.curSelectSpaceIdx?(this.isMyWalking=!0,this.UpdateMyTag(),this.AvatarWalk(e,this.SelfPlayer,vt.Self,(function(){n.isMyWalking=!1}))):(S.stopAllByTarget(this.SelfPlayer),this.DisapearPlayer(this.SelfPlayer,(function(){n.SelfPlayer.worldPosition=n.GetStandNodePosition(e),n.UpdateMyTag(),n.ApearPlayer(n.SelfPlayer,null)})),this.isMyWalking=!1),this.curSelectSpaceIdx=i))},o.UpdateMyBet=function(e){this.UpdateMyTag(),this.myTotalBet=e,f("Bet/Node_Layout/Label_Coins",this.SelfPlayer).getComponent(p).string=I.FormatMoneyForCamma(this.myTotalBet),f("Bet",this.SelfPlayer).active=e>0},o.UpdateMyTag=function(){if(this.SelfPlayer){var e=!0;2!=this.curSelectSpaceIdx&&3!=this.curSelectSpaceIdx&&5!=this.curSelectSpaceIdx||(e=!1),f("Bet",this.SelfPlayer).setPosition(y(1==e?48:-48,20,0))}},o.UpdateSpacesBet=function(e,t){var n=this;void 0===t&&(t=!1),e.forEach((function(e,i){n.UpdateSpaceBet(i,e,t)})),this.betScatter=e},o.UpdateSpaceBet=function(e,t,n){if(void 0===n&&(n=!1),!this.betScatter||Number(this.betScatter.get(e))!=Number(t)){var i=this.IconGroup[e-1];if(f("Label_Coins",i).getComponent(p).string=I.FormatMoneyForCamma(t),n){S.stopAllByTarget(i);var a=new S(i);a.to(.1,{scale:new P(1.2,1.2,1.2)}),a.to(.1,{scale:new P(1,1,1)}),a.start()}}},o.NoticeSceneResult=function(e,t,n){var i=this;0==e&&(this.UpdateOwnerData(t.ownerData,!1),this.winMoney=t.winMoney,n.sceneData&&n.sceneData.sceneId==this.curSceneId&&(this.m_SceneResultData=n,this.UpdateSceneData(n.sceneData,n.players),this.gameState=mt.Ending,I.WaitUntil(.05,(function(){var e=!1;return i.playerPlaceMap.forEach((function(t,n){-1==t&&(e=!0)})),i.isMyWalking&&(e=!0),!e}),(function(){i.AppearAllDoor(),i.scheduleOnce(function(){W.Instance.PlaySound("killStart"),i.KillPlayer.worldPosition=i.KillStart.worldPosition,i.KillPlayer.active=!0,i.walkSpeed=250,i.AvatarWalk(n.killSpaceId,i.KillPlayer,vt.Police,function(){i.walkSpeed=500,i.RedSpace(n.killSpaceId),f("People/Spine_People",i.KillPlayer).getComponent(c.Skeleton).setAnimation(0,i.BoomSpineStrs[n.killSpaceId-1],!1),W.Instance.PlaySound("kan"),i.scheduleOnce(function(){W.Instance.PlaySound("dead"),i.DisapearPlayers(n.killSpaceId),i.scheduleOnce(function(){i.KillPlayer.active=!1,W.Instance.PlaySound("flyGold"),i.FlyGold2OtherRoom(n.killSpaceId),i.scheduleOnce(function(){var e=!1,t=!1,a=function(){e&&t&&(i.maintainSceneId==i.curSceneId&&i.maintainRoomId==i.roomId?k.Server.close():(i.resetData(),C.sceneReq()))}.bind(i);i.ShowResult(n,function(){e=!0,a()}.bind(i)),i.walkSpeed=500,i.ResultPlayersWalkBack(function(){t=!0,a()}.bind(i))}.bind(i),2)}.bind(i),1)}.bind(i),.5)}.bind(i))}.bind(i),2)}))))},o.FlyGold2OtherRoom=function(e){for(var t=this.SpaceGroup[e-1],n=0;n<this.SpaceGroup.length;n++){var i=this.SpaceGroup[n];i!=t&&this.m_FlyGoldEff.flyGoldTo(.5,1,t.worldPosition,i.worldPosition,100)}},o.RedSpace=function(e){},o.ShowResult=function(e,t){this.m_BattleRoyale_Title.ShowResult(e,this.winMoney,this.myTotalBet,t)},o.ResultPlayersWalkBack=function(e){var t=this;void 0===e&&(e=null);var n=0,i=0;this.playerAvatarMap.forEach((function(a,o){t.playerPlaceMap.get(o)>0&&(t.AvatarWalkBack(t.playerPlaceMap.get(o),a,vt.Others,function(){n+=1,t.playerPlaceMap.set(o,0),n==i&&e&&e()}.bind(t)),t.playerPlaceMap.set(o,-1),i+=1)})),this.curSelectSpaceIdx>=0&&(i+=1,this.isMyWalking=!0,this.AvatarWalkBack(this.curSelectSpaceIdx+1,this.SelfPlayer,vt.Self,function(){(n+=1)==i&&e&&e(),t.isMyWalking=!1}.bind(this)),this.curSelectSpaceIdx=-1),0==i&&e&&e()},o.AvatarWalkBack=function(e,t,n,i){void 0===i&&(i=null);var a=this.LinesGroup[e-1],o=[];o.push(t.worldPosition.clone());for(var r=a.children.length-1;r>=0;r--)o.push(a.children[r].worldPosition);o.push(this.PosEnter.worldPosition);var l=this.GetStandNodePosition(0);o.push(new P(this.PosEnter.worldPosition.x,l.y)),o.push(l),this.AvatarWalkByPaths(t,o,n,i)},o.UpdatePlayerNum=function(e){this.Node_Scene.active=!0,this.Node_CountDown.active=!0,this.Label_CurCount.string=e.toString(),M.Instance().betPlayer=e},o.UpdateSpacesPlayer=function(e){var t=this;if(this.gameState==mt.Betting){for(var n=new Map,i=0;i<e.length;i++)n.set(e[i].uid,e[i]);var a=[];this.playerAvatarMap.forEach((function(e,i){n.has(i)||-1!=t.playerPlaceMap.get(i)&&a.push(i)}));for(var o=function(){var e=t.playerAvatarMap.get(a[r]);t.playerAvatarMap.delete(a[r]),t.playerPlaceMap.delete(a[r]),t.DisapearPlayer(e,(function(){t.PutPeopleAvatar(e)}))},r=0;r<a.length;r++)o();for(var l=function(){var n=e[s];if(n.uid==M.Instance().UserSelf.uid)return 0;if(n.isRandom)if(t.playerAvatarMap.get(n.uid)){var i=t.playerPlaceMap.get(n.uid);if(-1==i)return 0;if(0==i&&n.spaceId>0){var a=t.playerAvatarMap.get(n.uid);t.playerPlaceMap.set(n.uid,-1),t.AvatarWalk(n.spaceId,a,vt.Others,function(){t.playerPlaceMap.set(n.uid,n.spaceId)}.bind(t))}else if(i!=n.spaceId){var o=t.playerAvatarMap.get(n.uid);t.playerPlaceMap.set(n.uid,n.spaceId),t.DisapearPlayer(o,(function(){o.worldPosition=t.GetStandNodePosition(n.spaceId),t.ApearPlayer(o,null)}))}}else{var r=t.GetPeopleAvatar();r.setParent(t.PlayerPanel),r.active=!0;var l=n.nickName;f("Label_NickName",r).getComponent(p).string=l,f("People/Spine_People",r).active=0==n.skin,f("People/Spine_Skin1",r).active=1==n.skin,f("People/Spine_Skin2",r).active=2==n.skin,f("People/Spine_Skin3",r).active=3==n.skin,r.worldPosition=t.GetStandNodePosition(0),t.playerAvatarMap.set(n.uid,r),t.playerPlaceMap.set(n.uid,-1),t.AvatarWalk(n.spaceId,r,vt.Others,function(){t.playerPlaceMap.set(n.uid,n.spaceId)}.bind(t))}else if(t.playerAvatarMap.get(n.uid)){var c=t.playerPlaceMap.get(n.uid);if(0==c&&n.spaceId>0){var u=t.playerAvatarMap.get(n.uid);t.playerPlaceMap.set(n.uid,n.spaceId),t.DisapearPlayer(u,(function(){u.worldPosition=t.GetStandNodePosition(n.spaceId),t.ApearPlayer(u,null)}))}else if(c>0&&n.spaceId!=c){var d=t.playerAvatarMap.get(n.uid);t.playerPlaceMap.set(n.uid,n.spaceId),t.DisapearPlayer(d,(function(){d.worldPosition=t.GetStandNodePosition(n.spaceId),t.ApearPlayer(d,null)}))}}else{var h=t.GetPeopleAvatar();h.setParent(t.PlayerPanel),h.active=!0;var S=n.nickName;f("Label_NickName",h).getComponent(p).string=S,f("People/Spine_People",h).active=0==n.skin,f("People/Spine_Skin1",h).active=1==n.skin,f("People/Spine_Skin2",h).active=2==n.skin,f("People/Spine_Skin3",h).active=3==n.skin,t.playerAvatarMap.set(n.uid,h),t.playerPlaceMap.set(n.uid,n.spaceId),h.scale=new P(0,0,0),h.worldPosition=t.GetStandNodePosition(n.spaceId),t.ApearPlayer(h,null)}},s=0;s<e.length;s++)l()}},o.AvatarWalk=function(e,t,n,i){void 0===i&&(i=null);var a=this.LinesGroup[e-1],o=[];o.push(t.worldPosition.clone()),o.push(new P(this.PosEnter.worldPosition.x,t.worldPosition.y)),o.push(this.PosEnter.worldPosition);for(var r=0;r<a.children.length-1;r++)o.push(a.children[r].worldPosition);o.push(a.children[a.children.length-1].worldPosition),o.push(this.GetStandNodePosition(e)),this.AvatarWalkByPaths(t,o,n,i)},o.AvatarWalkByPaths=function(e,t,n,i){var a=this;void 0===i&&(i=null);for(var o=new S(e),r=function(){var i=l,r=t[i-1],s=t[i],p=P.distance(s,r)/a.walkSpeed;o.call((function(){var t="";t=s.x<=r.x&&s.y>=r.y?"lb_walk":s.x<=r.x&&s.y<=r.y?"lf_walk":s.x>=r.x&&s.y<=r.y?"rf_walk":"rb_walk",f("People/Spine_People",e).getComponent(c.Skeleton).setAnimation(0,t,!0),n!=vt.Police&&(f("People/Spine_Skin1",e).getComponent(c.Skeleton).setAnimation(0,t,!0),f("People/Spine_Skin2",e).getComponent(c.Skeleton).setAnimation(0,t,!0),f("People/Spine_Skin3",e).getComponent(c.Skeleton).setAnimation(0,t,!0))})).to(p,{worldPosition:s}),n==vt.Police&&l==t.length-4&&o.call((function(){a.BoomSpace(a.m_SceneResultData.killSpaceId)})).delay(1)},l=1;l<t.length;l++)r();o.call((function(){a.UpdateAvatarStatus(e,n)})),i&&o.call(i),o.start()},o.UpdateAvatarStatus=function(e,t){if(e){var n=f("People/Spine_People",e).getComponent(c.Skeleton),i="",a=I.RandInt(0,100);i=a<20?"lb_idle":a<40?"rb_idle":a<70?"lf_idle":"rf_idle",n.setAnimation(0,i,!0),t!=vt.Police&&(f("People/Spine_Skin1",e).getComponent(c.Skeleton).setAnimation(0,i,!0),f("People/Spine_Skin2",e).getComponent(c.Skeleton).setAnimation(0,i,!0),f("People/Spine_Skin3",e).getComponent(c.Skeleton).setAnimation(0,i,!0))}},o.GetStandNodePosition=function(e){return 0==e?this.RandomWorldPosInNodeRectangle(this.WaitStandPanel):this.RandomWorldPosInNodeRectangle(this.spaceStandGroup[e-1])},o.RandomWorldPosInNodeRectangle=function(e){var t=e.getComponent(g),n=_(-t.width/2,t.width/2),i=_(-t.height/2,t.height/2);return new P(e.worldPosition.x+n,e.worldPosition.y+i)},o.ClearPeople=function(){var e=this;this.playerAvatarMap.forEach((function(t,n){e.PutPeopleAvatar(t),S.stopAllByTarget(t)})),this.playerAvatarMap.clear(),this.playerPlaceMap.clear(),S.stopAllByTarget(this.SelfPlayer)},o.GetPeopleAvatar=function(){var e=this.avatarPool.get();return e||(e=b(this.PlayerTemp)),e.scale=new P(1,1,1),e},o.ApearPlayer=function(e,t){this.UpdateAvatarStatus(e,vt.Others),S.stopAllByTarget(e);var n=new S(e);n.to(.1,{scale:new P(1,1,1)}),n.call((function(){t&&t()})),n.start()},o.DisapearPlayer=function(e,t){S.stopAllByTarget(e);var n=new S(e);n.to(.1,{scale:new P(0,0,0)}),n.call((function(){t&&t()})),n.start()},o.DisapearPlayers=function(e){var t=this,n=[];this.playerPlaceMap.forEach((function(t,i){t==e&&n.push(i)}));for(var i=function(){t.playerPlaceMap.delete(n[a]);var e=t.playerAvatarMap.get(n[a]);e&&(t.playerAvatarMap.delete(n[a]),t.DisapearPlayer(e,function(){t.PutPeopleAvatar(e)}.bind(t)))},a=0;a<n.length;a++)i();this.curSelectSpaceIdx==e-1&&(this.SelfPlayer.active=!1)},o.PutPeopleAvatar=function(e){this.avatarPool.put(e)},o.ResortPlayersSibling=function(){var e=[];(e=e.concat(this.PlayerPanel.children)).sort((function(e,t){return t.position.y-e.position.y}));for(var t=0;t<e.length;t++)e[t].setSiblingIndex(t)},o.ShowEnding=function(){this.gameState=mt.Ending,this.Node_Scene.active=!1,this.Node_CountDown.active=!1},o.HideAllDoor=function(){for(var e=0;e<this.SpaceGroup.length;e++)f("Door",this.SpaceGroup[e]).active=!1},o.AppearAllDoor=function(){for(var e=this,t=function(){var t=f("Door",e.SpaceGroup[n]);t&&(t.active=!0,f("Door_Normal",t).active=!1,f("Door_Broken",t).active=!1,f("Spine_DoorAppear",t).active=!0,f("Spine_DoorAppear",t).getComponent(c.Skeleton).setAnimation(0,"chuiziyanwu",!0),setTimeout((function(){f("Spine_DoorAppear",t).active=!1,f("Door_Normal",t).active=!0}),1200))},n=0;n<this.SpaceGroup.length;n++)t()},o.BoomSpace=function(e){var t=this,n=f("Door",this.SpaceGroup[e-1]);if(n){f("People/Spine_People",this.KillPlayer).getComponent(c.Skeleton).setAnimation(0,this.BoomSpineStrs[e-1],!1),W.Instance.PlaySound("kan");var i=f("Door_Normal",n);setTimeout((function(){W.Instance.PlaySound("doorKan"),t.Boom.active=!0;var e=new P(i.worldPosition.x,i.worldPosition.y,0);t.Boom.worldPosition=e,t.Boom.getComponent(c.Skeleton).setAnimation(0,"baozhav01",!1),f("Door_Normal",n).active=!1,f("Door_Broken",n).active=!0,f("Spine_DoorAppear",n).active=!1}),500)}},o.WebSocketConnent=function(e){var t=this;this.IsReconnect=!1,k.Server.init("game",k.BattleRoyaleAddress,(function(){var n=new k.GateProtoBuf.LoginReq;n.token=e,k.Server.request(T.WSGetUserLogin,n,(function(e,n){if(0!=n)return t.IsReconnect=!1,void(10003==n&&t.TokenInvalid());t.IsReconnect=!0;k.GateProtoBuf.LoginResp.decode(e);C.gameNowTimeReq()}))}),(function(){t.m_PopTipsPanel.ShowTipsPanel(z.t("game.main_error_6"))}))},o.onDestroy=function(){k.loadRemoteImage.ReleaseRemoteViewName("BattleRoyaleMainUI"),k.Server.close(),k.EventTarget.off(T.AllRoomList,this.OnAllRoomList,this),k.EventTarget.off(T.SelectRoom,this.OnSelectedRoom,this),k.EventTarget.off(T.RoomLeave,this.OnLeaveGame,this),k.EventTarget.off(T.RoomBet,this.OnBet,this),k.EventTarget.off(T.RoomPick,this.OnPick,this),k.EventTarget.off(T.RoomScene,this.OnGameScene,this),k.EventTarget.off(T.OnBetScatterUpdate,this.OnBetScatterUpdate,this),k.EventTarget.off(T.OnPlayerUpdate,this.OnPlayerUpdate,this),k.EventTarget.off(T.OnSceneResult,this.OnSceneResult,this),k.EventTarget.off(T.OnMoneyTransfer,this.OnMoneyTransfer,this),k.EventTarget.off(T.OnGetNowTime,this.OnGetNowTime,this),k.EventTarget.off(T.WSOnKick,this.TokenInvalid,this),k.EventTarget.off(T.WSHeartbeatTimeout,this.OnHeartbeatTimeout,this),k.EventTarget.off(T.OnServerMaintain,this.OnServerMaintain,this),this.node.off(s.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.avatarPool.clear()},t}(B)).prototype,"audioSource",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(Re.prototype,"m_PopBoard",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(Re.prototype,"m_PopRank",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(Re.prototype,"m_PopHelp",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(Re.prototype,"m_FlyGoldEff",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Re.prototype,"m_BattleRoyale_Title",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(Re.prototype,"m_TipWnd",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Re.prototype,"m_PopTipsPanel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Re.prototype,"m_PopLoading",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Re.prototype,"m_EventTarget",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Re.prototype,"SpacePanel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Re.prototype,"Spine_Red",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Re.prototype,"PlayerTemp",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Re.prototype,"WaitStandPanel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Re.prototype,"PlayerPanel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Re.prototype,"IconPanel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Re.prototype,"SelfPlayer",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Re.prototype,"Lines",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Re.prototype,"PosEnter",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Re.prototype,"KillStart",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Re.prototype,"KillPlayer",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Re.prototype,"Boom",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Re.prototype,"Node_Scene",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Re.prototype,"Label_SceneID",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(Re.prototype,"Label_CurCount",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Re.prototype,"Label_LimitCount",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Re.prototype,"Node_CountDown",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Re.prototype,"Label_CountDown",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Re.prototype,"Button_Week",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Re.prototype,"Button_Total",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(Re.prototype,"Label_MyGold",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(Re.prototype,"Button_OpenTransfer",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(Re.prototype,"Button_Bet",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=t(Re.prototype,"Button_OpenBetList",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=t(Re.prototype,"Label_CurBet",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=t(Re.prototype,"Node_SelectBet",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=t(Re.prototype,"Button_CloseBet",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=t(Re.prototype,"BetContent",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=t(Re.prototype,"Button_Help",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=Re))||Te));o._RF.pop()}}}));

System.register("chunks:///_virtual/game_dts",["./BattleRoyaleData.ts","./BattleRoyaleMainUI.ts","./BattleRoyale_FlyGoldEff.ts","./BattleRoyale_MsgPoster.ts","./BattleRoyale_Title.ts","./PopBoard.ts","./PopHelp.ts","./PopLoading.ts","./PopRank.ts","./PopTipsPanel.ts","./PopTransfer.ts","./Tip.ts","./TipWnd.ts","./run.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PopBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleRoyale_MsgPoster.ts","./G.ts","./CmdEvent.ts","./Utils.ts","./I18NFunc.ts"],(function(e){var t,o,n,r,i,a,l,s,c,m,u,p,d,g,b,f,_,y,C,h,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Button,s=e.Node,c=e.ScrollView,m=e.Label,u=e.find,p=e.instantiate,d=e.Vec3,g=e.Color,b=e.color,f=e.Component},function(e){_=e.BattleRoyale_MsgPoster},function(e){y=e.G},function(e){C=e.CmdEvent},function(e){h=e.Utils},function(e){v=e.I18NFunc}],execute:function(){var R,M,L,I,B,T,A,N,F,w,G,P,z,S,k,D,E,K,V,H,U;i._RF.push({},"5692aAtZO1BM7gP+Gwh7kiM","PopBoard",void 0);var j=a.ccclass,x=a.property;e("PopBoard",(R=j("PopBoard"),M=x(l),L=x(s),I=x(s),B=x(c),T=x(s),A=x(s),N=x(m),F=x(m),w=x(s),R((z=t((P=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).roomNameArr=void 0,n(t,"Button_Close",z,r(t)),n(t,"Node_Total",S,r(t)),n(t,"MyRecordItemTemp",k,r(t)),n(t,"ScrollView_MyRecord",D,r(t)),n(t,"Content100",E,r(t)),n(t,"Content10",K,r(t)),n(t,"Label_AllBet",V,r(t)),n(t,"Label_AllGet",H,r(t)),n(t,"Content_MyRecord",U,r(t)),t}o(t,e);var i=t.prototype;return i.onLoad=function(){this.InitData(),this.InitComponent(),this.AddEvent()},i.InitData=function(){this.roomNameArr=["01","02","03","04","05","06","07","08"]},i.InitComponent=function(){this.MyRecordItemTemp.active=!1,this.Button_Close.node.on(l.EventType.CLICK,this.Click_Close,this)},i.AddEvent=function(){y.EventTarget.on(C.RoomRecord,this.onRecord,this)},i.Click_Close=function(){this.node.active=!1},i.onRecord=function(e,t){if(0==t){for(var o=y.GameProtoBuf.RecordResp.decode(e),n=[1,2,3,4,5,6,7,8],r=1;r<=8;r++){var i=n[r-1],a=o.statistics.get(i),l=u("Item"+r,this.Content100);u("Tag/Label_Name",l).getComponent(m).string=this.roomNameArr[i-1],u("Node_Layout/Label_KillCount",l).getComponent(m).string=a?o.statistics.get(i).toString():"0"}for(var s=0;s<10;s++){var c=u("Item"+(s+1),this.Content10);if(o.killerRoomRecords.length>s){var p=o.killerRoomRecords[s];u("Tag/Label_Name",c).getComponent(m).string=this.roomNameArr[p.spaceId-1],u("Label_Date",c).getComponent(m).string="No."+p.sceneId}else c.active=!1}if(this.Label_AllBet.string=h.FormatMoneyForKMB(o.totalInvestMoney),this.Label_AllGet.string=h.FormatMoneyForKMB(o.totalPrizeMoney),this.Content_MyRecord.destroyAllChildren(),o.records&&o.records.length>0)for(var d=0;d<o.records.length;d++)this.AddRecordItem(o.records[d])}else console.error("获取记录失败")},i.AddRecordItem=function(e){if(this.MyRecordItemTemp){var t=p(this.MyRecordItemTemp);t.active=!0,t.setPosition(new d(0,0,0)),t.setParent(this.Content_MyRecord);var o=e.selectSpaceId!=e.killSpaceId;u("Label_Term",t).getComponent(m).string="No."+e.sceneId,u("Label_Date",t).getComponent(m).string=h.GetTimeStrByTimeStamp(e.resultTime.toNumber()),0==e.isValid?(u("Node_BG/Label_GetTips",t).getComponent(m).string=v.t("game.return"),u("Label_Success",t).active=!1,u("Label_Fail",t).active=!0,u("Label_Fail",t).getComponent(m).color=g.WHITE,u("Label_Fail",t).getComponent(m).string=v.t("game.invaild")):(u("Node_BG/Label_GetTips",t).getComponent(m).string=o?v.t("game.main_tips_get"):v.t("game.main_tips_loss"),u("Label_Success",t).active=o,u("Label_Fail",t).active=!o),u("Label_MyRoom",t).getComponent(m).string=this.roomNameArr[e.selectSpaceId-1],u("Label_KillRoom",t).getComponent(m).string=this.roomNameArr[e.killSpaceId-1],u("Label_MyBet",t).getComponent(m).string=h.FormatMoneyForCamma(e.investMoney),u("Label_MyGet",t).getComponent(m).string=o?h.FormatMoneyForCamma(e.prizeMoney):h.FormatMoneyForCamma(e.investMoney),u("Label_MyGet",t).getComponent(m).color=o?b(255,255,255,255):b(254,60,28,255)}},i.GetParam=function(e){this.node.active=!0,_.gameRecord()},i.onDestroy=function(){y.EventTarget.off(C.RoomRecord,this.onRecord,this)},t}(f)).prototype,"Button_Close",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(P.prototype,"Node_Total",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(P.prototype,"MyRecordItemTemp",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(P.prototype,"ScrollView_MyRecord",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"Content100",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(P.prototype,"Content10",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(P.prototype,"Label_AllBet",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(P.prototype,"Label_AllGet",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(P.prototype,"Content_MyRecord",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=P))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/PopHelp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,l,c,s,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,c=e.Button,s=e.Node,a=e.v3,u=e.tween,p=e.Component}],execute:function(){var h,f,C,d,m,y,b,v,_;r._RF.push({},"f5fc5CmNbxKxpNzX/yQ272/","PopHelp",void 0);var g=l.ccclass,k=l.property;e("PopHelp",(h=g("PopHelp"),f=k(c),C=k(s),d=k(c),h((b=t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"TouchMask",b,i(t)),n(t,"NodeCommon",v,i(t)),n(t,"Button_CloseHelp",_,i(t)),t}o(t,e);var r=t.prototype;return r.onLoad=function(){this.TouchMask.node.on(c.EventType.CLICK,this.Click_Close,this),this.Button_CloseHelp.node.on(c.EventType.CLICK,this.Click_Close,this)},r.Click_Close=function(){this.node&&(this.node.active=!1)},r.OpenSelf=function(){this.node&&(this.node.active=!0,this.NodeCommon.scale=a(.5,.5,.5),u(this.NodeCommon).to(.2,{scale:a(1,1,1)},{easing:"backOut"}).start().call((function(){})))},t}(p)).prototype,"TouchMask",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"NodeCommon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(y.prototype,"Button_CloseHelp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,n,i,t,r,a,c,d,s,l;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,d=e.Tween,s=e.tween,l=e.Component}],execute:function(){var p,u,g,f,h;r._RF.push({},"965f0pd2wJL4K5Vn9KcZbw0","PopLoading",void 0);var L=a.ccclass,y=a.property;e("PopLoading",(p=L("PopLoading"),u=y(c),p((h=o((f=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o=e.call.apply(e,[this].concat(r))||this,i(o,"Node_Loading",h,t(o)),o}n(o,e);var r=o.prototype;return r.onLoad=function(){},r.Click_Confirm=function(){},r.HideLoading=function(){this.node&&(this.node.active=!1,d.stopAllByTarget(this.Node_Loading))},r.ShowLoading=function(){this.node&&(this.node.active=!0,s(this.Node_Loading).by(6,{angle:-360}).repeatForever().start())},o}(l)).prototype,"Node_Loading",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopRank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./G.ts","./CmdEvent.ts","./BattleRoyale_MsgPoster.ts","./Utils.ts","./I18NFunc.ts"],(function(t){var e,n,i,a,o,r,s,k,l,c,u,h,f,p,m,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Button,k=t.Node,l=t.find,c=t.Label,u=t.Component},function(t){h=t.G},function(t){f=t.CmdEvent},function(t){p=t.BattleRoyale_MsgPoster},function(t){m=t.Utils},function(t){_=t.I18NFunc}],execute:function(){var R,v,C,g,L,d,y,W,b,B,S,I,G;o._RF.push({},"6fe27b2bHtH3aBrVuE5g7dy","PopRank",void 0);var N=r.ccclass,w=r.property;t("PopRank",(R=N("PopRank"),v=w(s),C=w(s),g=w(s),L=w(k),d=w(k),R((b=e((W=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).rankItemGroup=void 0,e.isLastWeek=void 0,i(e,"Button_Close",b,a(e)),i(e,"Button_Week",B,a(e)),i(e,"Button_LastWeek",S,a(e)),i(e,"Content_Rank",I,a(e)),i(e,"Self",G,a(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.InitData(),this.InitComponent(),this.AddEvent()},o.InitData=function(){this.rankItemGroup=[],this.isLastWeek=!1},o.InitComponent=function(){for(var t=1;t<=10;t++){var e=l("RankItem"+t,this.Content_Rank);e&&this.rankItemGroup.push(e)}this.Button_Close.node.on(s.EventType.CLICK,this.Click_Close,this),this.Button_Week.node.on(s.EventType.CLICK,this.Click_Week,this),this.Button_LastWeek.node.on(s.EventType.CLICK,this.Click_LastWeek,this)},o.AddEvent=function(){h.EventTarget.on(f.RoomRank,this.onRank,this)},o.Click_Close=function(){this.node.active=!1},o.Click_Week=function(){this.isLastWeek=!1,this.RefreshWeekBtn()},o.Click_LastWeek=function(){this.isLastWeek=!0,this.RefreshWeekBtn()},o.RefreshWeekBtn=function(){this.Button_Week&&(l("UnCheck",this.Button_Week.node).active=this.isLastWeek,l("Check",this.Button_Week.node).active=!this.isLastWeek,l("UnCheck",this.Button_LastWeek.node).active=!this.isLastWeek,l("Check",this.Button_LastWeek.node).active=this.isLastWeek,p.gameRank(this.isLastWeek?2:1))},o.onRank=function(t,e){if(0==e){for(var n=h.GameProtoBuf.RankResp.decode(t),i=0;i<n.players.length&&!(i>=10);i++){var a=n.players[i];n.own.rank>0&&a.rank==n.own.rank&&(a.nickName=n.own.nickName),this.RefreshRankItem(i,a)}for(var o=n.players.length;o<this.rankItemGroup.length;o++)this.rankItemGroup[o].active=!1;this.RefreshSelf(n.own)}},o.RefreshRankItem=function(t,e){if(!(this.rankItemGroup.length<=t)){var n=this.rankItemGroup[t];n.active=!0,l("Sprite_Rank1",n).active=1==e.rank,l("Sprite_Rank2",n).active=2==e.rank,l("Sprite_Rank3",n).active=3==e.rank,l("Label_Rank",n).active=e.rank>3||0==e.rank,l("Label_Rank",n).getComponent(c).string=0==e.rank?_.t("game.rank_des_1"):e.rank.toString(),l("Label_NickName",n).getComponent(c).string=e.nickName,l("Label_Money",n).getComponent(c).string=m.FormatMoneyForCamma(e.money)}},o.RefreshSelf=function(t){this.Self&&(l("Sprite_Rank1",this.Self).active=1==t.rank,l("Sprite_Rank2",this.Self).active=2==t.rank,l("Sprite_Rank3",this.Self).active=3==t.rank,l("Label_Rank",this.Self).active=t.rank>3||0==t.rank,l("Label_Rank",this.Self).getComponent(c).string=0==t.rank?_.t("game.rank_des_1"):t.rank.toString(),l("Label_NickName",this.Self).getComponent(c).string=t.nickName,l("Label_Money",this.Self).getComponent(c).string=m.FormatMoneyForCamma(t.money))},o.GetParam=function(t){this.node.active=!0,this.Click_Week()},o.onDestroy=function(){h.EventTarget.off(f.RoomRank,this.onRank,this)},e}(u)).prototype,"Button_Close",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(W.prototype,"Button_Week",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(W.prototype,"Button_LastWeek",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(W.prototype,"Content_Rank",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(W.prototype,"Self",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=W))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopTipsPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./G.ts"],(function(n){var t,e,i,o,r,l,a,s,u,c,p,C,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,l=n._decorator,a=n.Node,s=n.Label,u=n.Button,c=n.v3,p=n.tween,C=n.Component},function(n){f=n.G}],execute:function(){var b,h,m,_,d,v,y,T,P,g,L;r._RF.push({},"b123etyeENCz7D28bQscvAs","PopTipsPanel",void 0);var B=l.ccclass,w=l.property;n("PopTipsPanel",(b=B("PopTipsPanel"),h=w(a),m=w(s),_=w(u),d=w(u),b((T=t((y=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return(t=n.call.apply(n,[this].concat(r))||this).MainUI=void 0,i(t,"NodeCommon",T,o(t)),i(t,"Label_Content",P,o(t)),i(t,"Button_Confirm",g,o(t)),i(t,"Button_CloseTips",L,o(t)),t}e(t,n);var r=t.prototype;return r.onLoad=function(){this.Button_Confirm.node.on(u.EventType.CLICK,this.Click_Confirm,this),this.Button_CloseTips.node.on(u.EventType.CLICK,this.Click_CloseTips,this)},r.SetMainUI=function(n){this.MainUI=n},r.Click_Confirm=function(){f.Server&&f.Server.close(),this.MainUI.ConnectUrl()},r.Click_CloseTips=function(){},r.ShowTipsPanel=function(n){this.Label_Content&&(this.Label_Content.string=n,this.node.active=!0,this.NodeCommon.scale=c(.5,.5,.5),p(this.NodeCommon).to(.2,{scale:c(1,1,1)},{easing:"backOut"}).start().call((function(){})))},t}(C)).prototype,"NodeCommon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(y.prototype,"Label_Content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"Button_Confirm",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(y.prototype,"Button_CloseTips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopTransfer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleRoyale_MsgPoster.ts","./Utils.ts","./G.ts","./CmdEvent.ts"],(function(t){var e,n,o,i,r,s,l,a,u,c,d,h,f,m,p,y,C,_,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Button,a=t.Node,u=t.Label,c=t.EditBox,d=t.ProgressBar,h=t.Slider,f=t.v3,m=t.tween,p=t.Component},function(t){y=t.BattleRoyale_MsgPoster},function(t){C=t.Utils},function(t){_=t.G},function(t){g=t.CmdEvent}],execute:function(){var b,T,v,B,M,G,E,S,P,O,k,L,w,z,F,N,R,I,x,D,A;r._RF.push({},"a9654fbfbBOI6RZim1QRW3A","PopTransfer",void 0);var K=s.ccclass,q=s.property;t("PopTransfer",(b=K("PopTransfer"),T=q(l),v=q(a),B=q(u),M=q(c),G=q(d),E=q(h),S=q(l),P=q(l),O=q(l),b((w=e((L=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).myGold=void 0,e.myScore=void 0,e.editNum=void 0,o(e,"TouchMask",w,i(e)),o(e,"NodeCommon",z,i(e)),o(e,"Label_MyGold",F,i(e)),o(e,"EditBox_Trans",N,i(e)),o(e,"ProgressBar_Trans",R,i(e)),o(e,"Slider_Trans",I,i(e)),o(e,"Button_Confirm",x,i(e)),o(e,"Button_Cancel",D,i(e)),o(e,"Button_ClosePop",A,i(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.InitComponent(),this.AddEvent()},r.InitComponent=function(){this.TouchMask.node.on(l.EventType.CLICK,this.Click_Close,this),this.Button_Confirm.node.on(l.EventType.CLICK,this.Click_Confirm,this),this.Button_Cancel.node.on(l.EventType.CLICK,this.Click_Close,this),this.Button_ClosePop.node.on(l.EventType.CLICK,this.Click_Close,this),this.Slider_Trans.node.on("slide",this.OnSliderCallFunc,this),this.EditBox_Trans.node.on("editing-did-ended",this.OnEditDidEnded,this)},r.AddEvent=function(){_.EventTarget.on(g.OnGetMoney,this.OnGetMoney,this)},r.OnSliderCallFunc=function(){var t=this.Slider_Trans.progress,e=Math.ceil(100*t)/100;e>1&&(e=1),this.Slider_Trans.progress=e,this.ProgressBar_Trans.progress=e;var n=e*this.myGold;this.editNum=n,this.EditBox_Trans.string=C.FormatMoneyForCamma(n)},r.OnEditDidEnded=function(t){var e=C.C2SMoney(Number(t.string)?Number(t.string):0);e<0&&(e=0),e>this.myGold&&(e=this.myGold);var n=e/this.myGold;this.Slider_Trans.progress=n,this.ProgressBar_Trans.progress=n,this.editNum=e,this.EditBox_Trans.string=C.FormatMoneyForCamma(e)},r.Click_Close=function(){this.node&&(this.node.active=!1)},r.Click_Confirm=function(){var t=this.editNum;t<=0?console.log("携入积分必须大于0"):t>this.myGold?console.log("可携入积分不足"):(y.gameMoneyTransferReq(t),this.Click_Close())},r.OnGetMoney=function(t,e){if(0==e){var n=_.GameProtoBuf.GetMoneyResp.decode(t);this.SetMyGold(n.money)}},r.SetMyGold=function(t){this.myGold=t,this.Label_MyGold&&(this.Label_MyGold.string=C.FormatMoneyForCamma(t))},r.OpenSelf=function(){this.node&&(this.node.active=!0,this.SetMyGold(0),this.Slider_Trans.progress=0,this.OnSliderCallFunc(),y.gameGetMoneyReq(),this.NodeCommon.scale=f(.5,.5,.5),m(this.NodeCommon).to(.2,{scale:f(1,1,1)},{easing:"backOut"}).start().call((function(){})))},r.onDestroy=function(){_.EventTarget.off(g.OnGetMoney,this.OnGetMoney,this)},e}(p)).prototype,"TouchMask",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(L.prototype,"NodeCommon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(L.prototype,"Label_MyGold",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"EditBox_Trans",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"ProgressBar_Trans",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(L.prototype,"Slider_Trans",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(L.prototype,"Button_Confirm",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(L.prototype,"Button_Cancel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(L.prototype,"Button_ClosePop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=L))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/run.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,i,t,o,u,a,l,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,u=e._decorator,a=e.Node,l=e.AudioSource,c=e.Component}],execute:function(){var p,f,b,s,d,m,y,_,g,v,w,N,z,h,R,T,L;o._RF.push({},"42c34VANWRO6pyWGj63jfbi","run",void 0);var S=u.ccclass,j=u.property;e("run",(p=S("run"),f=j(a),b=j(a),s=j(a),d=j(a),m=j(a),y=j(a),_=j(l),p((w=n((v=function(e){function n(){for(var n,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=e.call.apply(e,[this].concat(o))||this,i(n,"m_EventTarget",w,t(n)),i(n,"m_Root",N,t(n)),i(n,"m_NodeView",z,t(n)),i(n,"m_NodeLoading",h,t(n)),i(n,"m_NodeReady",R,t(n)),i(n,"m_NodeTips",T,t(n)),i(n,"_audioSource",L,t(n)),n}r(n,e);var o=n.prototype;return o.init=function(){},o.onLoad=function(){this.init()},o.start=function(){},o.GetServerTimeCallBack=function(e,n){},n}(c)).prototype,"m_EventTarget",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(v.prototype,"m_Root",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"m_NodeView",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=n(v.prototype,"m_NodeLoading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(v.prototype,"m_NodeReady",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(v.prototype,"m_NodeTips",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(v.prototype,"_audioSource",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/Tip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,s,o,r,a,p,c,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Label,p=t.Sprite,c=t.UIOpacity,l=t.tween,u=t.Component}],execute:function(){var h,d,v,m,T,f;o._RF.push({},"5fe2410MuBDgLHtkIwcNKn7","Tip",void 0);var y=r.ccclass,_=r.property;t("Tip",(h=y("Tip"),d=_(a),h(((f=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(i=t.call.apply(t,[this].concat(o))||this).Spritenode=null,i.uiOpacity=null,i.m_IsActive=void 0,i.m_TargetY=void 0,i.m_Tween=void 0,n(i,"LabelTips",T,s(i)),i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.LabelTips.string="",this.Spritenode=this.node.getComponent(p),this.uiOpacity=this.node.getComponent(c),this.node.active=!1,this.m_IsActive=!1,i.index=0},o.SetText=function(t){this.LabelTips.string=t,this.m_IsActive&&this.node.active?this.SetInActive():(this.node.active=!0,this.OnAppear())},o.SetInActive=function(){null!=this.m_Tween&&(this.m_Tween.stop(),this.m_Tween=null),this.OnDisAppear(),this.OnAppear()},o.OnDisAppear=function(){this.uiOpacity.opacity=255,i.index++,this.m_TargetY=-50*i.index,this.node.setPosition(0,this.m_TargetY,0),this.m_IsActive=!1},o.OnAppear=function(){var t=this;this.m_IsActive=!0,this.m_Tween=l(this.uiOpacity).delay(1).to(.5,{opacity:0}).call((function(){t.node.active=!1,t.OnDisAppear()})).start()},i}(u)).index=void 0,T=i((m=f).prototype,"LabelTips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=m))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/TipWnd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tip.ts"],(function(t){var i,e,n,r,o,s,a,p,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.tween,p=t.v3,c=t.Component},function(t){u=t.Tip}],execute:function(){var h,d,l,T,f;o._RF.push({},"d6e7b+bpI5BD4szfx6QL+C5","TipWnd",void 0);var y=s.ccclass,_=s.property;t("TipWnd",(h=y("TipWnd"),d=_([u]),h((f=i((T=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).index=0,i.m_CurrPosY=0,n(i,"m_TipArray",f,r(i)),i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.ResetData()},o.GetNextTip=function(){var t=this.m_TipArray[this.index];return this.index+1>2?this.index=0:this.index++,t},o.ShowTips=function(t){this.m_CurrPosY+=50,a(this.node).to(.3,{position:p(0,this.m_CurrPosY,0)}).start(),this.GetNextTip().SetText(t)},o.ResetData=function(){this.index=0,this.m_CurrPosY=0,this.node.setPosition(0,0,0),this.m_TipArray[0].node.setPosition(0,100,0),this.m_TipArray[1].node.setPosition(0,50,0),this.m_TipArray[2].node.setPosition(0,0,0)},i}(c)).prototype,"m_TipArray",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=T))||l));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/game_dts', 'chunks:///_virtual/game_dts'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});