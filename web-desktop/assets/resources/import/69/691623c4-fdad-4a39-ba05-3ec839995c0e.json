[1,0,0,[["cc.TextAsset",["_name","text"],1]],[[0,0,1,3]],[[0,"local","syntax = \"proto3\";\r\n\r\npackage operator.mengtan.games.battleRoyale.v1;\r\n\r\n// option go_package = \"protobuf/pb/operator/mengtan/games/battleRoyale/v1;battleRoyale_v1\";\r\noption go_package = \"game-server/protobuf/gen/operator/mengtan/games/battleRoyale/v1;v1\";\r\n\r\nenum InjuryFreeSkin {\r\n  INJURY_FREE_SKIN_UNSPECIFIED = 0;\r\n  INJURY_FREE_SKIN_15 = 1; // 免伤15%\r\n  INJURY_FREE_SKIN_10 = 2; // 免伤10%\r\n  INJURY_FREE_SKIN_5 = 3; // 免伤5%\r\n}\r\n\r\nmessage Player {\r\n  string nickName = 1; // 昵称\r\n  int32 spaceId = 2; // 区块id\r\n  int32 uid = 3; // uid\r\n  bool isRandom = 4; // 是否随机\r\n  InjuryFreeSkin skin = 5; // 免伤皮肤\r\n}\r\n\r\nmessage InjuryFree {\r\n  InjuryFreeSkin skin = 1; // 皮肤\r\n  int64 ratio = 2; // 免伤比例\r\n}\r\n\r\nmessage PlayerData {\r\n  int64 uid = 1; // uid\r\n  string nickName = 2; // 昵称\r\n  int64 money = 3; // 金币\r\n  int32 spaceId = 4; // 区块id\r\n  int64 totalBet = 5; // 总压住\r\n  InjuryFree injuryFree = 6; // 免伤\r\n}\r\n\r\nmessage SceneData {\r\n  int32 roomId = 1; // 房间id\r\n  int64 sceneId = 2; // 场景id\r\n  int64 resultTime = 3; // 结算时间戳\r\n  map<int32, int64> betScatter = 4; // 下注分布\r\n}\r\n\r\n///////////////////// REQ && RESP /////////////////////\r\n\r\nmessage LeaveReq {\r\n}\r\nmessage LeaveResp {\r\n}\r\n\r\nmessage BetReq {\r\n  int64 sceneId = 1; // 场景id\r\n  int64 money = 2; // 下注金额\r\n}\r\nmessage BetResp {\r\n  int64 totalBet = 1; // 总共投注\r\n  int64  money = 2; // 余额\r\n}\r\n\r\nmessage PickReq {\r\n  int64 sceneId = 1; // 场景id\r\n  int32 spaceId = 2; // 区域id\r\n}\r\nmessage PickResp {\r\n}\r\n\r\nmessage SceneReq {\r\n\r\n}\r\nmessage SceneResp {\r\n  SceneData sceneData = 1; // 场景信息\r\n  PlayerData ownerData = 2; // 自身数据\r\n  repeated Player players = 3; // 玩家数据\r\n  int32 betPlayerNum = 4; // 投注玩家数量     \r\n  int64 maintainSceneId = 5; // 服务维护\r\n}\r\n\r\n// 排行榜\r\nmessage RankReq {\r\n  enum Week {\r\n    WEEK_UNSPECIFIED = 0;\r\n    WEEK_THIS = 1; // 本周\r\n    WEEK_LAST = 2; // 上周\r\n  }\r\n  Week week = 1;\r\n}\r\nmessage RankResp {\r\n  message Player {\r\n    string nickName = 1; // 昵称\r\n    string avatar = 2; // 头像\r\n    int64 money = 3; // 💰\r\n    int32 rank = 4; // 排名\r\n    InjuryFreeSkin skin = 5; // 免伤皮肤\r\n  }\r\n  Player own = 1; // 玩家信息\r\n  repeated Player players = 2; // 玩家排名\r\n}\r\n\r\n// 记录\r\nmessage RecordReq {\r\n}\r\nmessage RecordResp {\r\n  message KillerRoomRecord {\r\n    int64 sceneId = 1; // 场景id\r\n    int32 spaceId = 2; // 区域id\r\n  }\r\n  map<int32, int32> statistics = 1; // 近100期统计\r\n  repeated KillerRoomRecord killerRoomRecords = 2; // 近10期杀手房间记录\r\n  int64 totalInvestMoney = 3; // 总投入\r\n  int64 totalPrizeMoney = 4;  // 总产出\r\n  message Record {\r\n    int64 sceneId = 1; // 场景id\r\n    int64 resultTime = 2; // 结算时间\r\n    int32 selectSpaceId = 3; // 所选区域\r\n    int32 killSpaceId = 4; // 被杀区域\r\n    int64 investMoney = 5; // 投入\r\n    int64 prizeMoney = 6; // 产出\r\n    int32 isValid=7;//是否有效\r\n  }\r\n  repeated Record records = 5; // 参与记录\r\n}\r\n\r\nmessage AllRoomReq {\r\n}\r\nmessage AllRoomResp {\r\n  message Room {\r\n    message Space {\r\n      int32 id = 1; // 区域id\r\n      string name = 2; // 区域名称\r\n    }\r\n    int32 id = 1; // 房间id\r\n    int32 moneyType = 2; // 货币类型\r\n    repeated int64 bets = 3; // 压住列表\r\n    map<int32, Space> spaces = 4; // 区域配置\r\n    int32 roomDanceRate = 5;\r\n  }\r\n  map<int32, Room> rooms = 1;\r\n}\r\n\r\nmessage SelectRoomReq {\r\n  int32 roomId = 1; // 房间id\r\n}\r\nmessage SelectRoomResp {\r\n}\r\n\r\nmessage MoneyTransferReq {\r\n  int64 money = 1;\r\n}\r\nmessage MoneyTransferResp {\r\n  int64 money = 1;\r\n}\r\n\r\nmessage GetMoneyReq {\r\n  int32 moneyType = 1;\r\n}\r\nmessage GetMoneyResp {\r\n  int64 money = 2;\r\n}\r\n\r\nmessage ResultReq {\r\n  int32 sceneId = 1; // 场景id\r\n}\r\nmessage ResultResp {\r\n  int64 winMoney = 1; // 赢得金额\r\n  PlayerData ownerData = 2; // 自身数据\r\n}\r\n\r\nmessage NowTimeReq {\r\n}\r\nmessage NowTimeResp {\r\n  int64 timestamp = 1; // 时间戳\r\n  string zoneName = 2; // 时区名\r\n  int64 zoneOffset = 3; // 时区偏移\r\n}\r\n\r\n///////////////////// PUSH /////////////////////\r\n\r\nmessage OnBetScatterUpdate {\r\n  int32 roomId = 1; // 房间id\r\n  int64 sceneId = 2; // 期数\r\n  map<int32, int64> betScatter = 3; // 下注分布\r\n}\r\n\r\nmessage OnPlayerUpdate {\r\n  int32 roomId = 1; // 房间id\r\n  int64 sceneId = 2; // 期数\r\n  repeated Player players = 3;  // 玩家数据\r\n  int32 betPlayerNum = 4; // 投注玩家数量\r\n}\r\n\r\nmessage OnSceneResult {\r\n  message Marquee {\r\n    enum Type {\r\n      TYPE_UNSPECIFIED = 0;\r\n      TYPE_INJURY_FREE = 1; // 免伤\r\n      TYPE_CRITICAL_HIT = 2; // 暴击时刻\r\n      TYPE_LUCKY = 3; // 幸运降临\r\n    }\r\n    Type type = 1; // 跑马灯类型\r\n    string nickName = 2; // 昵称\r\n    int64 totalBet = 3; // 总压住\r\n    map<string, string> value = 4; // 参数\r\n  }\r\n\r\n  SceneData sceneData = 1; // 场景数据\r\n  int32 killSpaceId = 2; // 被杀区域id\r\n  repeated Player players = 3; // 玩家数据\r\n  repeated Marquee marquees = 4; // 跑马灯\r\n}\r\n\r\nmessage OnServerMaintain {\r\n  int32 roomId = 1; // 房间id\r\n  int64 sceneId = 2; // 场景id\r\n}\r\n"]],0,0,[],[],[]]
